// Static curated price table for common Israeli grocery items
// Prices are rough national averages in ILS

export const priceEstimates: Record<string, number> = {
  // Dairy
  'חלב': 7.90,
  'חלב 3%': 7.90,
  'חלב 1%': 7.90,
  'גבינה לבנה': 6.50,
  'גבינה צהובה': 29.90,
  'קוטג': 8.90,
  'שמנת': 9.90,
  'יוגורט': 5.90,
  'חמאה': 12.90,
  'ביצים': 28.90,
  'ביצים 12': 28.90,
  'ביצים תריסר': 28.90,
  'לבן': 7.50,
  'שוקו': 6.90,
  
  // Bread & Bakery
  'לחם': 8.90,
  'לחם לבן': 8.90,
  'לחם מלא': 12.90,
  'חלה': 14.90,
  'פיתות': 9.90,
  'לחמניות': 11.90,
  'באגט': 7.90,
  'טורטיה': 15.90,
  
  // Fruits
  'תפוחים': 9.90,
  'בננות': 8.90,
  'תפוזים': 6.90,
  'לימון': 5.90,
  'לימונים': 12.90,
  'אבוקדו': 7.90,
  'ענבים': 19.90,
  'אפרסקים': 14.90,
  'נקטרינות': 14.90,
  'אבטיח': 19.90,
  'מלון': 14.90,
  'תותים': 24.90,
  'אגסים': 14.90,
  'שזיפים': 16.90,
  'קלמנטינות': 9.90,
  'מנגו': 12.90,
  'אננס': 16.90,
  'רימון': 9.90,
  
  // Vegetables
  'עגבניות': 7.90,
  'מלפפונים': 5.90,
  'בצל': 4.90,
  'שום': 3.90,
  'גזר': 4.90,
  'תפוחי אדמה': 6.90,
  'בטטה': 8.90,
  'פלפל': 9.90,
  'חציל': 7.90,
  'קישוא': 6.90,
  'כרוב': 5.90,
  'חסה': 6.90,
  'פטרוזיליה': 3.90,
  'כוסברה': 3.90,
  'שמיר': 3.90,
  'נענע': 3.90,
  'בזיליקום': 5.90,
  'תרד': 9.90,
  'סלרי': 7.90,
  'כרפס': 7.90,
  'ברוקולי': 9.90,
  'כרובית': 8.90,
  'פטריות': 14.90,
  'קולורבי': 5.90,
  'צנונית': 4.90,
  'סלק': 6.90,
  
  // Meat & Chicken
  'עוף': 34.90,
  'חזה עוף': 39.90,
  'כרעיים': 24.90,
  'שניצל': 44.90,
  'בשר טחון': 49.90,
  'סטייק': 89.90,
  'אנטריקוט': 119.90,
  'קבב': 54.90,
  'נקניקיות': 29.90,
  'נקניק': 29.90,
  'הודו': 39.90,
  
  // Fish
  'דג': 49.90,
  'סלמון': 79.90,
  'טונה': 29.90,
  'טונה בקופסה': 12.90,
  'סרדינים': 9.90,
  'נסיכה': 39.90,
  'דניס': 59.90,
  'בורי': 49.90,
  
  // Pantry Staples
  'אורז': 12.90,
  'פסטה': 7.90,
  'ספגטי': 7.90,
  'קוסקוס': 11.90,
  'בורגול': 9.90,
  'קמח': 6.90,
  'סוכר': 8.90,
  'מלח': 3.90,
  'שמן': 14.90,
  'שמן זית': 34.90,
  'חומץ': 7.90,
  'רוטב עגבניות': 6.90,
  'רסק עגבניות': 4.90,
  'קטשופ': 12.90,
  'מיונז': 14.90,
  'חרדל': 9.90,
  'טחינה': 16.90,
  'חומוס': 9.90,
  'שעועית': 8.90,
  'עדשים': 11.90,
  'תירס': 7.90,
  'זיתים': 14.90,
  'חמוצים': 12.90,
  
  // Snacks & Sweets
  'ביסלי': 6.90,
  'במבה': 6.90,
  'שוקולד': 12.90,
  'עוגיות': 14.90,
  'גלידה': 24.90,
  'חטיף': 5.90,
  'קרקר': 9.90,
  'פופקורן': 11.90,
  'אגוזים': 29.90,
  'שקדים': 39.90,
  'בוטנים': 19.90,
  'צימוקים': 14.90,
  
  // Beverages
  'מים': 7.90,
  'מים מינרליים': 7.90,
  'קולה': 8.90,
  'ספרייט': 8.90,
  'פנטה': 8.90,
  'מיץ תפוזים': 12.90,
  'מיץ': 12.90,
  'בירה': 9.90,
  'יין': 39.90,
  'קפה': 24.90,
  'נס קפה': 29.90,
  'תה': 14.90,
  
  // Frozen
  'פיצה': 29.90,
  'שניצלונים': 34.90,
  'ירקות קפואים': 14.90,
  'אפונה': 9.90,
  'תירס קפוא': 11.90,
  'בצק עלים': 16.90,
  'פלאפל': 19.90,
  
  // Cleaning & Household
  'סבון': 9.90,
  'סבון כלים': 12.90,
  'אקונומיקה': 8.90,
  'נוזל כביסה': 34.90,
  'מרכך': 19.90,
  'נייר טואלט': 34.90,
  'מגבונים': 14.90,
  'שקיות אשפה': 19.90,
  'ספוג': 6.90,
  
  // Baby
  'חיתולים': 69.90,
  'מגבונים לחים': 14.90,
  'מזון תינוקות': 12.90,
  
  // Personal Care
  'שמפו': 24.90,
  'מרכך שיער': 24.90,
  'סבון גוף': 19.90,
  'משחת שיניים': 14.90,
  'דאודורנט': 19.90,
  'קרם': 29.90,
};

// Normalize text for matching
export function normalizeItemName(name: string): string {
  return name
    .trim()
    .toLowerCase()
    .replace(/[^\u0590-\u05FFa-z0-9\s]/g, '')
    .replace(/\s+/g, ' ')
    .trim();
}

// Synonym map for common variations
const synonyms: Record<string, string> = {
  'חלב 3 אחוז': 'חלב',
  'חלב 1 אחוז': 'חלב',
  'ביצים 12 יחידות': 'ביצים',
  'מי מינרל': 'מים מינרליים',
  'קפה נמס': 'נס קפה',
  'פסטה ספגטי': 'ספגטי',
  'גבינה צהובה פרוס': 'גבינה צהובה',
  'עוף שלם': 'עוף',
};

export function getEstimatedPrice(itemName: string): number | null {
  const normalized = normalizeItemName(itemName);
  
  // Check direct match
  for (const [key, price] of Object.entries(priceEstimates)) {
    if (normalizeItemName(key) === normalized) {
      return price;
    }
  }
  
  // Check synonyms
  const synonym = synonyms[normalized];
  if (synonym) {
    const synNormalized = normalizeItemName(synonym);
    for (const [key, price] of Object.entries(priceEstimates)) {
      if (normalizeItemName(key) === synNormalized) {
        return price;
      }
    }
  }
  
  // Check partial match (item name contains a known item)
  for (const [key, price] of Object.entries(priceEstimates)) {
    const keyNormalized = normalizeItemName(key);
    if (normalized.includes(keyNormalized) || keyNormalized.includes(normalized)) {
      return price;
    }
  }
  
  return null;
}
